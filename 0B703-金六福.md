# 基于树莓派的可视频监控远程开门器

- 小组名称：金六福（Kinliufook）
- 小组成员：赵东宇 于乐 刘玄 孔思琦 穆柳允 李广宇
- 小组简介：《嵌入式软件开发技术与工具》2019课程项目小组，但愿金六福这个福气满满的名字能保佑我们六小只进展顺利，远离bug。

---

## 一、开发环境

### 1.1 执行环境(Execution Environment):目标平台的硬件环境

#### Host端

    一台PC(Linux操作系统 或 装有Linux操作系统虚拟机)

#### Target端

    Raspberry Pi 3B

树莓派是一款基于ARM的微型电脑主板，以SD/MicroSD卡为内存硬盘，卡片主板周围有1/2/4个USB接口和一个10/100以太网接口，可连接键盘、鼠标和网线，同时拥有视频模拟信号的电视输出接口和HDMI高清视频输出接口，以上部件全部整合在一张仅比信用卡稍大的主板上，具备所有PC的基本功能。

![The Raspberry Pi 3 board](https://github.com/WolffyAndy/Kinliufook/blob/master/img/The%20Raspberry%20Pi%203%20board.png)

> (图片来源:Raspberry Pi User Guide 4th Edition)

- 树莓派3B参数表


| 树莓派型号 | Raspberry Pi 3B |
| :---: | :--- |
| SOC | Broadcom BCM2837 |
| CPU | Cortex-A53 64Bit Soc at 1.2GHz |
| GPU | Broadcom VideoCore IV，OpenGL ES 2.0,1080p 30 h.264/MPEG-4 AVC高清解码器 |
| 内存 | 1GB SDRAM @ 400MHz (LPDDR2) |
| 板载资源 | Sandisk Micro SD card 16GB class 10 (ours) |
| 蓝牙 | Bluetooth 4.1/Bluetooth Low Energy(BLE) |
| 无线网络 | 802.11.b/g/n wireless LAN |
| 以太网网口 | Ethernet over USB 2.0(max. throughput 100Mbps) |
| USB | 4x USB Ports |
| GPIO | 40 pins |
| 音频接口 | 3.5mm插孔，HDMI电子输出或IIS |
| 视频接口 | Full Size HDMI, MIPI DSI display port, MIPI CSI camera port |
| 电源输入 | 5V/2.5A DC via micro USB or GPIO |
| 重量 | 45g |
| 总体尺寸 | 85 x 56 x 17mm |
| 工作环境温度 | 0-50℃ |
| 操作系统 | Debian GNU/Linux、 Fedora、 Arch Linux 、 RISC OS、 Windows10 IoT |

- 关于GPU的分配：

	1GB内存要用于Broadcom BCM2837上的中央处理器（CPU）和图形处理器（GPU），因此要在两者之间合理分配内存。默认情况下GPU占128M，剩下全部用于CPU。如果将树莓派用作文件服务器或Web服务器，不需要使用视频输出，可以减少分配给GPU的内存数量(最少为16MB);如果用它来浏览网页，看B站甚至运行3D游戏，那么应该为GPU分配较大的内存，从而提高GPU性能，使其更好地渲染3D游戏画面;如果需要接入摄像头，则至少要为要为GPU分配128MB显存。


### 1.2 运行环境(Run-Time Environment):目标平台上为运行嵌入式软件而必须的的软件环境。

#### 1.2.1依赖库：python官方和第三方库；OpenCV


#### 1.2.2中间件：
- MQTT协议
	MQTT(MQ Telemetry Transport) 消息队列遥测传输协议是IBM开发的一种网络应用层的协议，提供轻量级的，支持可发布/可订阅的的消息推送模式，使设备对设备之间的短消息通信变得简单，比如现在应用广泛的低功耗传感器，手机、嵌入式计算机、微型控制器，卫星等移动设备。

>[Reference:MQTT协议优缺点及其实现](https://www.cnblogs.com/carterslam/p/9274417.html)

- (待添加)

#### 1.2.3操作系统：


### 1.3 编程环境(Programming Environment):为完成嵌入式软件开发而必须的软硬件工具。

#### 1.3.1 文本编辑器：vi/vim，gedit,nano

- nano(小白最爱)

	nano是一个小巧自由，并且友好的编辑器，在大部分linux上都有nano命令。相对vi，不熟悉linux的话nano比较简单,只需要知道如何进入编辑，如何保存退出即可。

- vi(标准)

	vi编辑器是所有Unix及Linux系统下标准的编辑器，他就相当于windows系统中的记事本一样。对Unix及Linux系统的任何版本，vi编辑器是完全相同的，学会它后，您将在Linux的世界里畅行无阻。

- vim(编程最爱)
	Vim是一个类似于Vi的著名的功能强大、高度可定制的文本编辑器，在Vi的基础上改进和增加了很多特性。代码补全、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用，和Emacs并列成为类Unix系统用户最喜欢的文本编辑器。

	安装vim只需要以下两步操作

	卸载vim-tiny：$ sudo apt-get remove vim-common

	安装vim full：$ sudo apt-get install vim

- gedit(纯文本)

	是Linux下的一个纯文本编辑器,但你也可以把它用来当成是一个集成开发环境 (IDE), 它会根据不同的语言高亮显现关键字和标识符。十分的简单易用，有良好的语法高亮，对中文支持很好，支持包括gb2312、gbk在内的多种字符编码。


#### 1.3.2 交叉编译工具：gcc  

- GCC（GNU Compiler Collection，GNU编译器套件），是由 GNU开发的编程语言编译器。它是以GPL许可证所发行的自由软件，也是 GNU计划的关键部分。

- 树莓派中已经安装了gcc工具链，可在树莓派中直接编译源代码生成可执行文件。与此同时，PC机上也可使用gcc工具链生成可执行代码，但是和树莓派上的gcc工具不同，PC机上的gcc工具生成intel或amd芯片上可执行的代码，但树莓派却是arm系列的芯片，显然存在不小的差异。那么使用交叉工具链便可在PC机上开发树莓派中可执行程序。 虽然树莓派的主频可达700MHz远高于一般的嵌入式系统，但相比于PC机其性能还是差些，使用交叉工具链可节约开发时间。在编译链接同等规模的代码时，PC机所用的时间应少于树莓派所用时间，通过交叉编译的方法提高效率。


#### 1.3.3 交叉调试工具：gdb/gdbserver

GDB是GNU开源组织发布的一个强大的UNIX下的程序调试工具。在UNIX平台下做软件，GDB这个调试工具有比VC、BCB的图形化调试器更强大的功能。

一般来说，GDB主要帮忙完成下面四个方面的功能：
- 启动程序，可以按照自定义的要求随心所欲的运行程序。
- 可让被调试的程序在你所指定的调置的断点处停住。（断点可以是条件表达式）
- 当程序被停住时，可以检查此时程序中所发生的事。
- 动态的改变程序的执行环境。

---

## 二、需求分析
基于第一章对开发环境的了解，确定要开发的项目，给出需求分析，具体内容包括：
项目名称

项目架构（关联图，架构图等）

功能需求（及非功能需求）分析

项目所需的软硬件条件

课上讨论时间：3月22日；课下小组更新文档
文档上传GIT仓库时间：4月4日（周四）8：00AM

